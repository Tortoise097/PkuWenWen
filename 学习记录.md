# HTML，CSS和Javascript

1.  **HTML** 定义了网页的内容
2.  **CSS** 描述了网页的布局
3.  **JavaScript** 控制了网页的行为

## html教程：（参考菜鸟教程）

后缀名可以使.htm或者是.html，没有区别

html更改图片大小：

```html
<img src="/i/mouse.jpg" height="200" width="200" />
```







## JavaScript

在页面中用

```javascript
<script>
    插入一段script
</script>

```



# vue.js 教程

```vue
<div id="vue_det">
    <h1>site : {{site}}</h1>
    <h1>url : {{url}}</h1>
    <h1>{{details()}}</h1>
</div>
'''
<div> </div> 是html里的语法，
HTML <div> 元素是块级元素，它可用于组合其他 HTML 元素的容器。
<div> 元素没有特定的含义。除此之外，由于它属于块级元素，浏览器会在其前后显示折行。
'''
<script type="text/javascript">
    var vm = new Vue({
        el: '#vue_det',   # 使用这个名字意味着所有的改动发生在名为vue_det的区块内
        data: {
            site: "菜鸟教程",
            url: "www.runoob.com",
            alexa: "10000"
        },
        methods: {
            details: function() {
                return  this.site + " - 学的不仅是技术，更是梦想！";
            }
        }
    })  # 这个里面的语法完全就是C++的语法啊
</script>
    
# 然后这个script就是类似javascript那种
    
```



带$ 开头的就类似类里面的静态变量？？（全局变量？）

## 理解vue的初始化代码CreateApp：

https://vueschool.io/articles/vuejs-tutorials/the-benefits-of-the-vue-3-app-initialization-code/



## 在vue里使用vue-router跳转页面：

教程见：https://www.cnblogs.com/wisewrong/p/6277262.html
1 在src文件夹下创建router.js文件和main.js平级，在router.js中引入所需的组件

关于vue routers里面childre的用法见：（nested router）
https://router.vuejs.org/guide/essentials/nested-routes.html
看上去挺复杂的在这我就不用了。




# Git操作

基本操作：





# 关于网络结构的教程

mysite整个外层root directory：container for the project
manage.py: command-line utility that lets you interact with this Django project in various ways.
change port: py manage.py runserver 8080
URL : A *Uniform Resource Locator* (*URL*), colloquially termed a web address

So, basically, when you have a website, you need to have a *server* (machine) where it lives. When the *server* receives an incoming *request* (in a letter), it sends back your website (in another letter).
When you send a response, you don't always want to send the same thing to everybody. It is so much better if your letters are personalized, especially for the person that has just written to you, right? Django helps you with creating these personalized, interesting letters. :)

Django  is a free and open source web application framework,  A web framework is a set of components that helps you to develop websites faster and easier.

==所谓framework指的其实是一堆写好的component==

-   urlresolver：给server 发request，用urlresolver来确定这个request到底是给哪个网页的request？
-   view：look at a database for information(view指的是检查database)——包括权限检查等等，最后对数据进行处理
-   

questions:

```python
# n mysite/settings.py:
ALLOWED_HOSTS #??怎么用？
ALLOWED_HOSTS = [os.getenv('PROJECT_DOMAIN') + ".glitch.me"] # 这个glith是啥啊？

```

# 在django里使用mangodb：

使用djongo引擎

教程：https://medium.com/@9cv9official/django-to-mongodb-djongo-or-mongoengine-d9d56b836a3d

首先建好本地的mangodb数据库（用mango Compass）

```python
# 在django环境下 pip install djongo
#在setting.py里增加：
DATABASES = {
    'default': {
        'ENGINE': 'djongo',
        'NAME' : 'PkuWenWendatabase', #your database
    }
}
# 然后将 from django.db import models 
# 改成： from djongo import models jiuxingle

# 最后：run：
$ python manage.py makemigrations
$ python manage.py migrate

```

# 使用django

```commandline
在一个目录下：
首先在anaconda下激活虚拟环境：
conda activate backend
# 创建一个demo project：
django-admin startproject #_myproject_name_eg_PKUWenWen_#
create an app：
in the same directory as manage.py:
$ python manage.py startapp myapp   <-- this command create an application in the root diresctory

运行django程序：
python manage.py runserver

use：
pip install -r requirements.txt 	<-- 用这个指令安装项目里的所有依赖文件

generate requirements：
pip freeze> requirements.txt

```

# 使用vue：

```
在cmd里安装好npm
npm install vue@next <-- 如果之前安装过vue2.x
npm install -g @vue/cli <-- 安装vue的cli
vue create myapp <-- vue 创建一个项目
运行的时候使用：
yarn serve <-- 运行
或
yarn build <-- 编译
```

# 关于如何让django使用vue（x有问题不要用这个）

```
我观察学姐的项目，感觉他们应该是用了这个方法（就是用静态路径）：
https://www.cnblogs.com/wbdream/p/10569918.html
# 但是不知道为什么这个教程对我来说行不通哇


https://betterprogramming.pub/vue-django-using-vue-files-and-the-vue-cli-d6dd8c9145eb

这个教程我跑成功了！！

上面这个教程和下面的这个本质上是一样的，都是在同一个页面里一部分用django一部分用vue
https://medium.com/js-dojo/vue-django-best-of-both-frontends-701307871478

但是教程1并不需要webpack-loader的样子（webpack-loader我安装失败了）

```



# understand django

## 项目结构

```
PKuWenWen
├── manage.py 			#提供对项目的各种操作
├── PkuWenWenbackend
│   ├── __init__.py
│   ├── settings.py  	#对整个website的configuration，包括static文件的位置之类的
│   ├── urls.py			# url解析
│   └── wsgi.py
├── myapp				# an application
│   ├── __init__.py
│   ├── admin.py  		
│   ├── apps.py			
│   ├── models.py  		# 在这里面面向对象，声明各种class
│   ├── tests.py			
│   ├── views.py		# put the logic of the application
|   └── templates		# 存放各种templates
|		└── myapp		# 指明是myapp的templates
|			└──	xxx.html		# 放html用的
└── requirements.txt
```

整个项目的容器：PkuWenWen
整个项目的控制：PkuWenWenbackend

新建了一个myapp之后首先要在整个项目的setting里面的INSTALLED_APPS里面声明。
（例如：'myapp.apps.MyappConfig',）		<--- 具体格式照葫芦画瓢



## 面向对象

例如：

```python
from django.conf import settings
from django.db import models
from django.utils import timezone


class Post(models.Model):
    author = models.ForeignKey(settings.AUTH_USER_MODEL, on_delete=models.CASCADE)
    title = models.CharField(max_length=200)
    text = models.TextField()
    created_date = models.DateTimeField(default=timezone.now)
    published_date = models.DateTimeField(blank=True, null=True)

    def publish(self):
        self.published_date = timezone.now()
        self.save()

    def __str__(self):
        return self.title
```

这些model说白了就是要存的数据类型

然后add these model to database：

```
python manage.py makemigrations  _ClassName
python manage.py migrate _ClassName		<-- 把数据加到数据库里
```

## admin(create superuser)

Username: PkuWenWenAdmin
Email address: genesis_sss@163.com
password: administrators_yeah!
password(again): administrators_yeah!

然后使用django admin可以作为管理员往里面添加一些用户什么的



## 一些函数的用法

感觉django本身是一个用来管理数据库的东西……所谓后端主要是一些抽象的东西（比如用户数据之类的）
前面定义class也是用来存这些东西。

## URLS

## VIEWs

A view is a place where we put the "logic" of our application. It will request information from the `model` you created before and pass it to a `template`. We'll create a template in the next chapter. Views are just Python functions

主要是一些functions，然后这些functions会被别的地方调用，一旦调用就返回该返回的东西（比如被ulrpatterns里调用）
（看了学姐的项目可能这个views.py要用于数据交互？可能还挺复杂的 maybe）

view 的作用是联系models和templates：


## templates：

A  template is a file that we can re-use to present different information in a consistent format – for example, you could use a template to help you write a letter because although each letter might contain a different message and be addressed to a different person, they will share the same format.

这里面主要是用html写东西。但是也可以直接用到vue的样子……就是load static的方法

具体写可以学学html? 这里用的到吗。好了一会儿看看登录页怎么写

-   template extending： used the same part of the HTML for  different pages (复用的问题，基本的思想就是把一个网页拆成几个模块然后在不同的页面用同样的模块（如果用到了的话）)
-   

## how django connect to database

QuerySet

使用命令行对数据库进行操作，往里加入一些对象生成的实例之类的，然后在命令行里加东西啥的。（但是mango db 带的那个compass是不是可以直接加啊？——对的这个东西可以可视化的加，非常方便不需要用命令行）

这里面讲了怎么放动态的内容在html里



## CSS

bootstrap也是个前端工具

## Static files：（不要用这个）

CSS和images Their content doesn't depend on the request context and will be the same for every user.

CSS涉及到的都是一些设计的内容，简而言之就是墨书文档里的那些东西，照着那个搞就行了

# 参考资料

vue forum 参考自：https://morioh.com/p/7c7e185edf2c

一些django的基本操作和知识来自：https://tutorial.djangogirls.org/en/django_models/



# todo list

-   [ ] models.py：学会一些东西之后一会儿设计一下后端数据结构的class，把那些写出来。先做用户的部分。
-   [x] create a superuser
-   [ ] URLs.py: 考虑一下网页的部署问题（maybe参考一下学姐的那个）
    怎么写可以参考reddit这种论坛。
-   [ ] view是干嘛的现在你也知道了，参考学姐的项目可以写一点
-   [ ] 今天的目标就是根据所学的知识把理想的登录页整出来（打通前后端和数据库）
-   [ ] https://docs.djangoproject.com/en/3.1/ref/templates/language/#template-inheritance 学一下django的template inheritance这个在https://betterprogramming.pub/vue-django-using-vue-files-and-the-vue-cli-d6dd8c9145eb 里面讲了，似乎跟django使用vue有关系

# 待完善功能：

-   专业认证问题。是否有办法通过学号知道专业？（可能需要访问学校的数据库，会很麻烦）
-   用户页面应该可以看到用户之前提过的问题等等……也就是说我们需要一个UserCenter一类的东西，这样需要一个新的类来存储用户之前提过的问题之类的
-   待完善：用户上传头像的功能？现在暂时不支持传图。





# log

2021年5月29日03:19:26

更改了cors-headers的内容（虽然我不知道这块怎么用，说实话好像不用也行？那vue怎么通信）

1.  router.js里如果用createWebHashHistory 会出问题不用就没事
2.  分块的问题vue2不行vue3可以（vscode有报错但是能跑，因为vscode那个语法检查还是vue2）

关于django使用邮箱注册：

https://shafikshaon.medium.com/user-registration-with-email-verification-in-django-8aeff5ce498d

2021年5月31日17:52:28 

感天动地我学会发邮件了

邮箱验证功能要用django自带的一个库default_token_generator.make_token(user),
具体见：https://docs.djangoproject.com/en/3.2/topics/auth/default/
但是要用这个库的话要使用django自带的usermodel，我已经自己定义了UserModel所以我没用验证…………

那个邮箱验证有各种问题比如要用csrf_exempt

登录逻辑：当登录成功之后会跳转到schoolIndex页面。



# 下一步要用的知识：

## 搞一个可以用的登录页：

### html版：使用输入框

https://www.w3school.com.cn/tiy/t.asp?f=eg_html_form_submit

关于前后端数据传递问题可以看html表单：

https://www.runoob.com/html/html-forms.html

django url：

https://docs.djangoproject.com/en/3.2/topics/http/urls/



### vue版：使用el-form-item：（查一下怎么用）：

https://www.w3school.com.cn/tiy/t.asp?f=eg_html_form_submit

## 关于前后端数据交互问题：

google搜索：vue how to send data to backend

教程见：https://www.youtube.com/watch?v=XWfxsDcoqe4



# 待完成：

实现登录（SignIn)成功后到SchoolIndex的跳转。
并实现功能：当未登录的时候无法显示SchoolIndex页，当且仅当登录成功会显示SchoolIndex页。





